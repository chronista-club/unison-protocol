# Chrome DevTools MCP - Webãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆä¾‹

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€Chrome DevTools MCPã‚µãƒ¼ãƒãƒ¼ã‚’ä½¿ç”¨ã—ãŸWebãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®E2Eãƒ†ã‚¹ãƒˆã®å®Ÿè·µä¾‹ã§ã™ã€‚

## ãƒ†ã‚¹ãƒˆå¯¾è±¡

- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³: Vantage Hubãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- URL: http://localhost:8080
- æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯: Vue.js 3 + TypeScript

## ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª

### 1. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰åˆæœŸè¡¨ç¤ºã®ç¢ºèª

#### 1.1 ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èµ·å‹•

```bash
# Vantage Hubã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
cargo run --bin vantage-hub-demo -- --web --web-port 8080
```

#### 1.2 ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒšãƒ¼ã‚¸ã‚’é–‹ã

```json
mcp__chrome-devtools__new_page
{
  "url": "http://localhost:8080"
}
```

#### 1.3 åˆæœŸè¡¨ç¤ºè¦ç´ ã®ç¢ºèª

```
mcp__chrome-devtools__take_snapshot
```

**ç¢ºèªé …ç›®:**
- [ ] ãƒ˜ãƒƒãƒ€ãƒ¼ã‚¿ã‚¤ãƒˆãƒ« "ğŸš€ Vantage Hub" ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹
  - Dashboard
  - AI Agents
  - Settings
- [ ] çµ±è¨ˆæƒ…å ±ã‚«ãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹
  - Total Sessions
  - Active Agents
  - Messages Today

### 2. AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä¸€è¦§ã®ç¢ºèª

#### 2.1 AI Agentsãƒšãƒ¼ã‚¸ã¸ç§»å‹•

```json
mcp__chrome-devtools__click
{
  "uid": "nav_agents_link"
}
```

#### 2.2 ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä¸€è¦§ã®ç¢ºèª

```
mcp__chrome-devtools__take_snapshot
```

**ç¢ºèªé …ç›®:**
- [ ] ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] å„ã‚«ãƒ¼ãƒ‰ã«ä»¥ä¸‹ã®æƒ…å ±ãŒå«ã¾ã‚Œã‚‹
  - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåï¼ˆClaudeã€OpenAIç­‰ï¼‰
  - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆActive/Inactiveï¼‰
  - æœ€çµ‚ä½¿ç”¨æ—¥æ™‚
- [ ] "Add New Agent"ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹

### 3. æ–°è¦ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®è¿½åŠ 

#### 3.1 è¿½åŠ ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

```json
mcp__chrome-devtools__click
{
  "uid": "btn_add_agent"
}
```

#### 3.2 ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®ç¢ºèª

```
mcp__chrome-devtools__take_snapshot
```

**ç¢ºèªé …ç›®:**
- [ ] ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ãƒ•ã‚©ãƒ¼ãƒ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹
  - Provideré¸æŠ
  - API Keyå…¥åŠ›
  - Modelé¸æŠ
  - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå

#### 3.3 ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ï¼ˆæ‰‹å‹•ã§å®Ÿæ–½ï¼‰

ã“ã®éƒ¨åˆ†ã¯ç¾åœ¨ã®Chrome DevTools MCPã§ã¯è‡ªå‹•åŒ–ãŒå›°é›£ãªãŸã‚ã€æ‰‹å‹•ã§å…¥åŠ›ã—ã¾ã™ã€‚

#### 3.4 ä¿å­˜ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

```json
mcp__chrome-devtools__click
{
  "uid": "btn_save_agent"
}
```

### 4. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ã®ç¢ºèª

#### 4.1 åˆ¥ã‚¿ãƒ–ã§APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡

```bash
# æ–°ã—ã„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å®Ÿè¡Œ
curl -X POST http://localhost:8080/api/messages \
  -H "Content-Type: application/json" \
  -d '{
    "agent_id": "claude-001",
    "content": "Test message from API"
  }'
```

#### 4.2 UIã®è‡ªå‹•æ›´æ–°ã‚’ç¢ºèª

```
mcp__chrome-devtools__take_snapshot
```

**ç¢ºèªé …ç›®:**
- [ ] "Messages Today"ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ãŒå¢—åŠ 
- [ ] é€šçŸ¥ãƒˆãƒ¼ã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´ã«æ–°è¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¿½åŠ ã•ã‚Œã‚‹

### 5. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ç¢ºèª

#### 5.1 ç„¡åŠ¹ãªãƒ‡ãƒ¼ã‚¿ã§APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ

```bash
curl -X POST http://localhost:8080/api/agents \
  -H "Content-Type: application/json" \
  -d '{
    "provider": "invalid_provider"
  }'
```

#### 5.2 ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã®ç¢ºèª

```
mcp__chrome-devtools__take_snapshot
```

**ç¢ºèªé …ç›®:**
- [ ] ã‚¨ãƒ©ãƒ¼ãƒˆãƒ¼ã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé©åˆ‡
- [ ] UIãŒã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã—ã¦ã„ãªã„

### 6. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

#### 6.1 å¤§é‡ãƒ‡ãƒ¼ã‚¿ã®è¡¨ç¤º

```bash
# 100ä»¶ã®ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ
for i in {1..100}; do
  curl -X POST http://localhost:8080/api/messages \
    -H "Content-Type: application/json" \
    -d "{
      \"agent_id\": \"test-$i\",
      \"content\": \"Message $i\"
    }"
done
```

#### 6.2 ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ç¢ºèª

```
mcp__chrome-devtools__take_screenshot
```

**ç¢ºèªé …ç›®:**
- [ ] ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ãŒæ©Ÿèƒ½ã—ã¦ã„ã‚‹
- [ ] ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãŒã‚¹ãƒ ãƒ¼ã‚º
- [ ] æ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãŒå‹•ä½œã™ã‚‹

## ãƒ†ã‚¹ãƒˆçµæœã®è¨˜éŒ²

### æˆåŠŸã—ãŸé …ç›®
- âœ… ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰åˆæœŸè¡¨ç¤º
- âœ… ãƒšãƒ¼ã‚¸é·ç§»
- âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°
- âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### ç™ºè¦‹ã•ã‚ŒãŸå•é¡Œ
1. **å•é¡Œ**: ãƒ¢ãƒã‚¤ãƒ«ãƒ“ãƒ¥ãƒ¼ã§ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒéš ã‚Œã‚‹
   - **å„ªå…ˆåº¦**: ä¸­
   - **å¯¾å‡¦**: ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ã®æ”¹å–„ãŒå¿…è¦

2. **å•é¡Œ**: å¤§é‡ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºæ™‚ã«åˆå›ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãŒé…ã„
   - **å„ªå…ˆåº¦**: ä½
   - **å¯¾å‡¦**: ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã®å®Ÿè£…ã‚’æ¤œè¨

## ãƒ‡ãƒãƒƒã‚°Tips

### è¦ç´ ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆ

```javascript
// 1. è¤‡æ•°å›ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’å–ã‚‹ï¼ˆå‹•çš„è¦ç´ ã®å ´åˆï¼‰
mcp__chrome-devtools__take_snapshot
// 2ç§’å¾…æ©Ÿ
mcp__chrome-devtools__take_snapshot
// UIDã‚’ç¢ºèª

// 2. ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰
mcp__chrome-devtools__navigate_page
{
  "url": "http://localhost:8080"
}
```

### ã‚¯ãƒªãƒƒã‚¯ãŒåŠ¹ã‹ãªã„å ´åˆ

1. è¦ç´ ã®çŠ¶æ…‹ã‚’ç¢ºèª
   - disabledã«ãªã£ã¦ã„ãªã„ã‹
   - z-indexã§éš ã‚Œã¦ã„ãªã„ã‹
   - loadingã‚¹ãƒ”ãƒŠãƒ¼ãŒé‡ãªã£ã¦ã„ãªã„ã‹

2. JavaScriptã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼ã®ç¢ºèªï¼ˆæ‰‹å‹•ï¼‰

### ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã®å ´åˆ

```bash
# ã‚µãƒ¼ãƒãƒ¼ãƒ­ã‚°ã‚’ç¢ºèª
tail -f ./logs/server.log

# APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ç›´æ¥ç¢ºèª
curl -v http://localhost:8080/api/health
```

## è‡ªå‹•åŒ–ã®æ”¹å–„æ¡ˆ

### 1. ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªã®JSONåŒ–

```json
{
  "name": "Dashboard E2E Test",
  "steps": [
    {
      "action": "new_page",
      "params": { "url": "http://localhost:8080" }
    },
    {
      "action": "wait",
      "params": { "seconds": 2 }
    },
    {
      "action": "take_snapshot",
      "assert": {
        "contains_text": "Vantage Hub",
        "has_element": "#app"
      }
    }
  ]
}
```

### 2. ã‚«ã‚¹ã‚¿ãƒ ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°

```typescript
// ãƒ†ã‚¹ãƒˆãƒ˜ãƒ«ãƒ‘ãƒ¼ï¼ˆæ¦‚å¿µçš„ãªä¾‹ï¼‰
async function waitForElement(uid: string, maxAttempts = 5) {
  for (let i = 0; i < maxAttempts; i++) {
    const snapshot = await takeSnapshot();
    if (snapshot.includes(uid)) {
      return true;
    }
    await sleep(1000);
  }
  throw new Error(`Element ${uid} not found`);
}
```

## ã¾ã¨ã‚

Chrome DevTools MCPã¯ã€å¾“æ¥ã®E2Eãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã¨æ¯”è¼ƒã—ã¦ï¼š

**åˆ©ç‚¹:**
- ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãŒç°¡å˜
- ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ‡ãƒãƒƒã‚°ãŒå¯èƒ½
- å®Ÿéš›ã®ãƒ–ãƒ©ã‚¦ã‚¶ç’°å¢ƒã§ãƒ†ã‚¹ãƒˆ
- ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã§è¦–è¦šçš„ç¢ºèª

**åˆ¶é™äº‹é …:**
- ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã®è‡ªå‹•åŒ–ãŒå›°é›£
- è¤‡é›‘ãªã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ç­‰ï¼‰ã¯æ‰‹å‹•
- CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¸ã®çµ±åˆã¯ç¾çŠ¶å›°é›£

é–‹ç™ºä¸­ã®æ©Ÿèƒ½æ¤œè¨¼ã‚„ã€ãƒªãƒªãƒ¼ã‚¹å‰ã®æ‰‹å‹•E2Eãƒ†ã‚¹ãƒˆã«æœ€é©ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚